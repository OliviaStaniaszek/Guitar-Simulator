<!DOCTYPE html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guitar simulator</title>
    <!-- <script src="guitar2.js"></script> -->
    <!-- <script src="recorder.js"></script> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1>Play notes on the fretboard</h1>
  <ul>    
    <li onclick="playNote([5,0])" >e </li>
    <li onclick="playNote([5,1])" ></li>
    <li onclick="playNote([5,2])" ></li>
    <li onclick="playNote([5,3])" ></li>
    <li onclick="playNote([5,4])" ></li>
    <li onclick="playNote([5,5])" ></li>
    <li onclick="playNote([5,6])" ></li>
    <li onclick="playNote([5,7])" ></li>
    <li onclick="playNote([5,8])" ></li>
    <li onclick="playNote([5,9])" ></li>
    <li onclick="playNote([5,10])"></li>
    <li onclick="playNote([5,11])"></li>
    <li onclick="playNote([5,12])"></li>
    <li onclick="playNote([5,13])"></li>
    <li onclick="playNote([5,14])"></li>
    <li onclick="playNote([5,15])"></li>
    <li onclick="playNote([5,16])"></li>
    <li onclick="playNote([5,17])"></li>
    <li onclick="playNote([5,18])"></li>
    <li onclick="playNote([5,19])"></li>
    <li onclick="playNote([5,20])"></li>
    <li onclick="playNote([5,21])"></li>
    <li onclick="playNote([5,22])"></li>
  </ul>
 
  <ul>    
    <li onclick="playNote([4,0])" >B</li>
    <li onclick="playNote([4,1])" ></li>
    <li onclick="playNote([4,2])" ></li>
    <li onclick="playNote([4,3])" ></li>
    <li onclick="playNote([4,4])" ></li>
    <li onclick="playNote([4,5])" ></li>
    <li onclick="playNote([4,6])" ></li>
    <li onclick="playNote([4,7])" ></li>
    <li onclick="playNote([4,8])" ></li>
    <li onclick="playNote([4,9])" ></li>
    <li onclick="playNote([4,10])"></li>
    <li onclick="playNote([4,11])"></li>
    <li onclick="playNote([4,12])"></li>
    <li onclick="playNote([4,13])"></li>
    <li onclick="playNote([4,14])"></li>
    <li onclick="playNote([4,15])"></li>
    <li onclick="playNote([4,16])"></li>
    <li onclick="playNote([4,17])"></li>
    <li onclick="playNote([4,18])"></li>
    <li onclick="playNote([4,19])"></li>
    <li onclick="playNote([4,20])"></li>
    <li onclick="playNote([4,21])"></li>
    <li onclick="playNote([4,22])"></li>
  </ul>

  <ul>    
    <li onclick="playNote([3,0])" >G</li>
    <li onclick="playNote([3,1])" ></li>
    <li onclick="playNote([3,2])" ></li>
    <li onclick="playNote([3,3])" ></li>
    <li onclick="playNote([3,4])" ></li>
    <li onclick="playNote([3,5])" ></li>
    <li onclick="playNote([3,6])" ></li>
    <li onclick="playNote([3,7])" ></li>
    <li onclick="playNote([3,8])" ></li>
    <li onclick="playNote([3,9])" ></li>
    <li onclick="playNote([3,10])"></li>
    <li onclick="playNote([3,11])"></li>
    <li onclick="playNote([3,12])"></li>
    <li onclick="playNote([3,13])"></li>
    <li onclick="playNote([3,14])"></li>
    <li onclick="playNote([3,15])"></li>
    <li onclick="playNote([3,16])"></li>
    <li onclick="playNote([3,17])"></li>
    <li onclick="playNote([3,18])"></li>
    <li onclick="playNote([3,19])"></li>
    <li onclick="playNote([3,20])"></li>
    <li onclick="playNote([3,21])"></li>
    <li onclick="playNote([3,22])"></li>
  </ul>


  <ul>    
    <li onclick="playNote([2,0])" >D</li>
    <li onclick="playNote([2,1])" ></li>
    <li onclick="playNote([2,2])" ></li>
    <li onclick="playNote([2,3])" ></li>
    <li onclick="playNote([2,4])" ></li>
    <li onclick="playNote([2,5])" ></li>
    <li onclick="playNote([2,6])" ></li>
    <li onclick="playNote([2,7])" ></li>
    <li onclick="playNote([2,8])" ></li>
    <li onclick="playNote([2,9])" ></li>
    <li onclick="playNote([2,10])"></li>
    <li onclick="playNote([2,11])"></li>
    <li onclick="playNote([2,12])"></li>
    <li onclick="playNote([2,13])"></li>
    <li onclick="playNote([2,14])"></li>
    <li onclick="playNote([2,15])"></li>
    <li onclick="playNote([2,16])"></li>
    <li onclick="playNote([2,17])"></li>
    <li onclick="playNote([2,18])"></li>
    <li onclick="playNote([2,19])"></li>
    <li onclick="playNote([2,20])"></li>
    <li onclick="playNote([2,21])"></li>
    <li onclick="playNote([2,22])"></li>
  </ul>
  <ul>    
    <li onclick="playNote([1,0])" >A</li>
    <li onclick="playNote([1,1])" ></li>
    <li onclick="playNote([1,2])" ></li>
    <li onclick="playNote([1,3])" ></li>
    <li onclick="playNote([1,4])" ></li>
    <li onclick="playNote([1,5])" ></li>
    <li onclick="playNote([1,6])" ></li>
    <li onclick="playNote([1,7])" ></li>
    <li onclick="playNote([1,8])" ></li>
    <li onclick="playNote([1,9])" ></li>
    <li onclick="playNote([1,10])"></li>
    <li onclick="playNote([1,11])"></li>
    <li onclick="playNote([1,12])"></li>
    <li onclick="playNote([1,13])"></li>
    <li onclick="playNote([1,14])"></li>
    <li onclick="playNote([1,15])"></li>
    <li onclick="playNote([1,16])"></li>
    <li onclick="playNote([1,17])"></li>
    <li onclick="playNote([1,18])"></li>
    <li onclick="playNote([1,19])"></li>
    <li onclick="playNote([1,20])"></li>
    <li onclick="playNote([1,21])"></li>
    <li onclick="playNote([1,22])"></li>
  </ul>
  <ul>    
      <li onclick="playNote([0,0])" >E</li>
      <li onclick="playNote([0,1])" ></li>
      <li onclick="playNote([0,2])" ></li>
      <li onclick="playNote([0,3])" ></li>
      <li onclick="playNote([0,4])" ></li>
      <li onclick="playNote([0,5])" ></li>
      <li onclick="playNote([0,6])" ></li>
      <li onclick="playNote([0,7])" ></li>
      <li onclick="playNote([0,8])" ></li>
      <li onclick="playNote([0,9])" ></li>
      <li onclick="playNote([0,10])"></li>
      <li onclick="playNote([0,11])"></li>
      <li onclick="playNote([0,12])"></li>
      <li onclick="playNote([0,13])"></li>
      <li onclick="playNote([0,14])"></li>
      <li onclick="playNote([0,15])"></li>
      <li onclick="playNote([0,16])"></li>
      <li onclick="playNote([0,17])"></li>
      <li onclick="playNote([0,18])"></li>
      <li onclick="playNote([0,19])"></li>
      <li onclick="playNote([0,20])"></li>
      <li onclick="playNote([0,21])"></li>
      <li onclick="playNote([0,22])"></li>
  </ul>

  <div class="markers">
    <svg height="20" width="1100" style="pointer-events: none;">
      <circle cx="155" cy="10" r="10" stroke="none" stroke-width="3" fill="white" /> 
      <circle cx="245" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
      <circle cx="335" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
      <circle cx="423" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
      <circle cx="558" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
      <circle cx="692" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
      <circle cx="782" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
      <circle cx="872" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
      <circle cx="962" cy="10" r="10" stroke="none" stroke-width="3" fill="white" />
    </svg>
</div>

<!-- strings -->
<div>
  <hr style="top:88px; border-width: 1pt;">
  <hr style="top:128px; border-width: 1.2pt;">
  <hr style="top:168px; border-width: 1.4pt;">
  <hr style="top:208px; border-width: 1.5pt;">
  <hr style="top:248px; border-width: 1.6pt;">
  <hr style="top:288px; border-width: 1.7pt;">
</div>
    

    <div class="chords">
      <!-- majors -->
      <button onclick="playChord([null,3,2,0,1,0])">C</button>
      <button onclick="playChord([null,null,0,2,3,2])">D</button>
      <button onclick="playChord([0,2,2,1,0,0])">E</button>
      <button onclick="playChord([1,3,3,2,1,1])">F</button>
      <button onclick="playChord([3,2,0,0,0,3])">G</button>
      <button onclick="playChord([null,0,2,2,2,0])">A</button>
      <button onclick="playChord([null,2,4,4,4,2])">B</button>

      <br>
      <!-- minors -->
      <button onclick="playChord([null,3,5,5,4,3])">Cm</button>
      <button onclick="playChord([null,null,0,2,3,1])">Dm</button>
      <button onclick="playChord([0,2,2,0,0,0])">Em</button>
      <button onclick="playChord([1,3,3,1,1,1])">Fm</button>
      <button onclick="playChord([3,5,5,3,3,3])">Gm</button>
      <button onclick="playChord([null,0,2,2,1,0])">Am</button>
      <button onclick="playChord([null,2,0,4,3,2])">Bm</button>

      <!-- <button onclick="mute()">Mute</button> -->
    </div>

    <!-- <script src="recorder.js"></script> -->
    <!-- <input type="button" value="play" id="Play"> -->
    <!-- <input type="button" value="record" id="Start" onclick="startRecording()">
    <input type="button" value="stop" id="Stop" onclick="stopRecording()">
    <audio controls id='audio'></audio> -->

    <script src="recorder.js"></script>
    <!-- <input type="button" value="play" id="Play"> -->
    <input type="button" value="record" id="Start">
    <input type="button" value="stop" id="Stop">
    <!-- <audio controls></audio> -->
    <!-- <script src="recorder.js"></script> -->
    <script src="guitar2.js"></script>


    <h1>Distortion effect</h1>
    <!-- <audio controls id="song" onplay='context.resume()'>
      <source src="Bigmouth strikes again.mp3">
      Your browser does not support the audio tag.
    </audio> -->
    <audio controls loop id="myAudio">
      <source src="Bigmouth strikes again.mp3" type="audio/mpeg">
    </audio>

    <div class="range-slider">
      <span>Distortion: </span>  
      <input type="range" id="range" min="0" max="20" value="0">
    </div>
  </body>
</html>

<script>
  var context2 = new (window.AudioContext || window.webkitAudioContext)();

  //distortion
// var mediaElement = document.querySelector('audio');
let mediaElement = document.getElementById("myAudio");
var source = context2.createMediaElementSource(mediaElement);
var dist = context2.createWaveShaper();
var gain = context2.createGain();

source.connect(gain);
gain.connect(dist);
dist.connect(context2.destination);

gain.gain.value = 1;
dist.curve = makeDistortionCurve(0);

var range = document.querySelector('#range');
range.addEventListener('input', function(){
  var value = parseInt(this.value) * 5;
  dist.curve = makeDistortionCurve(value);
});

// http://stackoverflow.com/a/22313408/1090298
function makeDistortionCurve( amount ) {
  var k = typeof amount === 'number' ? amount : 0,
    n_samples = 44100,
    curve = new Float32Array(n_samples),
    deg = Math.PI / 180,
    i = 0,
    x;
  for ( ; i < n_samples; ++i ) {
    x = i * 2 / n_samples - 1;
    curve[i] = ( 3 + k ) * x * 20 * deg / ( Math.PI + k * Math.abs(x) );
  }
  return curve;
};
</script>
<!-- onclick="startRecording()" -->
<!-- onclick="stopRecording()" -->